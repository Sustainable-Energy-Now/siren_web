<!-- templates/help/help_display.html -->
{% extends 'base.html' %}

{% block title %}PowerMap User Manual{% endblock %}

{% block extra_css %}
<style>
    .help-content {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        line-height: 1.6; 
        color: #333;
        padding: 20px;
    }
    
    .help-content h1 { 
        color: #2c3e50; 
        border-bottom: 3px solid #3498db; 
        padding-bottom: 10px;
        margin-top: 30px;
        margin-bottom: 20px;
    }
    
    .help-content h2 { 
        color: #34495e; 
        border-bottom: 1px solid #bdc3c7; 
        padding-bottom: 5px;
        margin-top: 25px;
        margin-bottom: 15px;
    }
    
    .help-content h3 {
        color: #5a6c7d;
        margin-top: 20px;
        margin-bottom: 10px;
    }
    
    .help-content img { 
        border-radius: 8px; 
        box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
        display: block;
        margin: 20px auto;
        max-width: 100%;
        height: auto;
    }
    
    .help-content table { 
        border-collapse: collapse; 
        width: 100%; 
        margin: 20px 0;
        background-color: white;
    }
    
    .help-content th, .help-content td { 
        border: 1px solid #ddd; 
        padding: 12px; 
        text-align: left;
        vertical-align: top;
    }
    
    .help-content th { 
        background-color: #f8f9fa; 
        font-weight: bold;
        color: #495057;
    }
    
    .help-content tr:nth-child(even) {
        background-color: #f8f9fa;
    }
    
    .help-content blockquote { 
        background-color: #e3f2fd; 
        border-left: 4px solid #2196f3; 
        padding: 15px; 
        margin: 20px 0; 
        border-radius: 4px;
        font-style: italic;
    }
    
    .help-content code {
        background-color: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
    }
    
    .help-content pre {
        background-color: #f8f8f8;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 15px;
        overflow-x: auto;
    }
    
    .help-content ul, .help-content ol {
        margin: 15px 0;
        padding-left: 30px;
    }
    
    .help-content li {
        margin: 5px 0;
    }
    
    /* Table of Contents styling */
    .help-content .toc {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .help-content .toc ul {
        list-style-type: decimal;
        margin: 0;
        padding-left: 20px;
    }
    
    .help-content .toc a {
        text-decoration: none;
        color: #007bff;
    }
    
    .help-content .toc a:hover {
        text-decoration: underline;
    }
    
    /* Print styles */
    @media print {
        .help-content {
            font-size: 12pt;
            line-height: 1.4;
        }
        
        .help-content h1, .help-content h2 {
            page-break-after: avoid;
        }
        
        .help-content img {
            max-width: 100%;
            page-break-inside: avoid;
        }
        
        .help-content table {
            page-break-inside: avoid;
        }
    }
    
    /* Mobile responsive */
    @media (max-width: 768px) {
        .help-content {
            padding: 10px;
        }
        
        .help-content table {
            font-size: 0.9em;
        }
        
        .help-content th, .help-content td {
            padding: 8px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar for Navigation (optional) -->
        <div class="col-md-2 d-none d-md-block bg-light sidebar">
            <div class="position-sticky pt-3">
                <h6 class="px-3 mb-3 text-muted">Quick Actions</h6>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'generate_help_html' %}">
                            üîÑ Regenerate Help
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="window.print()">
                            üñ®Ô∏è Print Help
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'home' %}">
                            ‚Üê Back to Siren Web
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="col-md-10 ms-sm-auto px-md-4">
            <div class="help-content">
                {{ help_html_content|safe }}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Add copy buttons to code blocks
    document.querySelectorAll('pre code').forEach((block) => {
        const button = document.createElement('button');
        button.className = 'btn btn-sm btn-outline-secondary position-absolute';
        button.style.top = '5px';
        button.style.right = '5px';
        button.textContent = 'Copy';
        
        button.addEventListener('click', () => {
            navigator.clipboard.writeText(block.textContent).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => button.textContent = 'Copy', 2000);
            });
        });
        
        block.parentElement.style.position = 'relative';
        block.parentElement.appendChild(button);
    });
</script>
{% endblock %}